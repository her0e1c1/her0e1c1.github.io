
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>zahlen &mdash; Hiroyuki Ishii</title>
    
    <link rel="stylesheet" href="../../../static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../static/bootswatch-3.3.4/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../static/jquery.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Hiroyuki Ishii" href="../../../index.html" />
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67799795-2', 'auto');
    ga('send', 'pageview');
  </script>


  </head>
  <body role="document">

<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
  <div class="container">

    
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../index.html">
        Hiroyuki Ishii</a>
      <span class="navbar-text navbar-version pull-left"><b></b></span>
    </div>

    
    <div class="collapse navbar-collapse nav-collapse">
      <ul class="nav navbar-nav">
        
            <li><a href="../../../products.html">Products</a></li>
            <li><a href="../../index.html">Snippets</a></li>
            <li><a href="../../../about_me.html">About Me</a></li>
        
      </ul>
      
        

      
    </div>

  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="zahlen">
<h1><a class="toc-backref" href="#id2">zahlen</a><a class="headerlink" href="#zahlen" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#zahlen" id="id2">zahlen</a><ul>
<li><a class="reference internal" href="#gcd-scm" id="id3">gcd.scm</a></li>
<li><a class="reference internal" href="#pollanrd-rho-scm" id="id4">pollanrd-rho.scm</a></li>
<li><a class="reference internal" href="#prime-factorization-scm" id="id5">prime-factorization.scm</a></li>
<li><a class="reference internal" href="#semi-primes-scm" id="id6">semi-primes.scm</a></li>
<li><a class="reference internal" href="#sieveoferatosthenes-scm" id="id7">sieveOfEratosthenes.scm</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="gcd-scm">
<h2><a class="toc-backref" href="#id3">gcd.scm</a><a class="headerlink" href="#gcd-scm" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="pollanrd-rho-scm">
<h2><a class="toc-backref" href="#id4">pollanrd-rho.scm</a><a class="headerlink" href="#pollanrd-rho-scm" title="Permalink to this headline">¶</a></h2>
<p>mod nとした乱数生成関数fとし、x,yの2数を生成させ、対象の整数の因数を求める。(x=yとなった場合は失敗)</p>
<div class="highlight-gosh"><div class="highlight"><pre>(define (polland n)
 (define rlist (shuffle (iota n)))
 (let1 f (^x (ref rlist x))
       (let loop ((x 2) (y 2))
         (let* ((x (f x))
                (y (f (f y)))
                (d (gcd (abs (- x y)) n)))
           (cond ((= d 1) (loop x y))
                 ((= d n) -1)
                 (else d))))))
(print (polland 108))
(print (polland 3))
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>4
-1
</pre></div>
</div>
</div>
<div class="section" id="prime-factorization-scm">
<h2><a class="toc-backref" href="#id5">prime-factorization.scm</a><a class="headerlink" href="#prime-factorization-scm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>素因数分解<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="semi-primes-scm">
<h2><a class="toc-backref" href="#id6">semi-primes.scm</a><a class="headerlink" href="#semi-primes-scm" title="Permalink to this headline">¶</a></h2>
<p>２つの素数の積の集合(同じ者を含む)</p>
<div class="highlight-py"><div class="highlight"><pre><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
 <span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
 <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
 <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
 <span class="k">while</span> <span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">N</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
   <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">i</span><span class="p">,</span> <span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
    <span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
  <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
 <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="bp">False</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
   <span class="n">j</span> <span class="o">=</span> <span class="n">i</span>
   <span class="k">while</span> <span class="n">j</span><span class="o">*</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">N</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
     <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="o">*</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
 <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre><span class="o">[</span>4<span class="o">]</span>
<span class="o">[</span>4, 6, 9, 10, 14, 15, 21, 22, 25, 26, 33, 34, 35, 38, 39, 46, 49, 51, 55, 57, 58, 62, 65, 69, 74, 77, 82, 85, 86, 87, 91, 93, 94, 95<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="sieveoferatosthenes-scm">
<h2><a class="toc-backref" href="#id7">sieveOfEratosthenes.scm</a><a class="headerlink" href="#sieveoferatosthenes-scm" title="Permalink to this headline">¶</a></h2>
<p>p*p以上の整数を篩にかける(残ったものが素数)</p>
<p>size=100なら、10まで調べればOKになる
2, 4, 6, 8, 10, 12, 14, ... 98, 100
3, (6), 9, (12), ... 99
5, (10), (15), (20), 25, ... (100)
7, (14), (21), (28), (35), (42), 49 ... (98)</p>
<div class="highlight-ghc"><div class="highlight"><pre>primes = f [2..] where
  f (p:xs) = p:f [x | x &lt;- xs, (mod x p) /= 0]
main = print (takeWhile (&lt;100) primes)
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre><span class="o">[</span>2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97<span class="o">]</span>
</pre></div>
</div>
<p>2の倍数、3の倍数、5の倍数、、、と素数の倍数で数え上げていくので、計算量はO(n)となる</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;myutils.h&gt;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">make_prime_table</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">){</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="n">isPrime</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
  <span class="n">isPrime</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">isPrime</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>  <span class="c1">// 0, 1は素数でないので2から始める</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// (size-1)まで参照</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">isPrime</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
      <span class="c1">// jは、iより小さい数からスタートしなくてよい(i=3なら、6でもなく9からでOK)</span>
      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="n">isPrime</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">isPrime</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">isPrime</span> <span class="o">=</span> <span class="n">make_prime_table</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">isPrime</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97,
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">

  
  

  <div class="container">
    
    <p>
        &copy; Copyright 2015, Hiroyuki Ishii.<br/>
    </p>
  </div>
</footer>

  </body>
</html>