
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tree &mdash; Hiroyuki Ishii</title>
    
    <link rel="stylesheet" href="../../../static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../static/bootswatch-3.3.4/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../static/jquery.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Hiroyuki Ishii" href="../../../index.html" />
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67799795-2', 'auto');
    ga('send', 'pageview');
  </script>


  </head>
  <body role="document">

<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
  <div class="container">

    
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../index.html">
        Hiroyuki Ishii</a>
      <span class="navbar-text navbar-version pull-left"><b></b></span>
    </div>

    
    <div class="collapse navbar-collapse nav-collapse">
      <ul class="nav navbar-nav">
        
            <li><a href="../../index.html">Snippets</a></li>
            <li><a href="../../../about_me.html">About Me</a></li>
        
      </ul>
      
        

      
    </div>

  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="tree">
<h1><a class="toc-backref" href="#id1">tree</a><a class="headerlink" href="#tree" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#tree" id="id1">tree</a><ul>
<li><a class="reference internal" href="#flatten-scm" id="id2">flatten.scm</a></li>
<li><a class="reference internal" href="#index-scm" id="id3">index.scm</a></li>
<li><a class="reference internal" href="#isbalanced-scm" id="id4">isBalanced.scm</a></li>
<li><a class="reference internal" href="#lowest-common-ancestor-scm" id="id5">lowest-common-ancestor.scm</a></li>
<li><a class="reference internal" href="#sub-tree-scm" id="id6">sub-tree.scm</a></li>
<li><a class="reference internal" href="#traverse-order-scm" id="id7">traverse-order.scm</a></li>
<li><a class="reference internal" href="#union-find-scm" id="id8">union-find.scm</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="flatten-scm">
<h2><a class="toc-backref" href="#id2">flatten.scm</a><a class="headerlink" href="#flatten-scm" title="Permalink to this headline">¶</a></h2>
<p>(a b c d e f g h)
(a b c d e f g h)</p>
</div>
<div class="section" id="index-scm">
<h2><a class="toc-backref" href="#id3">index.scm</a><a class="headerlink" href="#index-scm" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="isbalanced-scm">
<h2><a class="toc-backref" href="#id4">isBalanced.scm</a><a class="headerlink" href="#isbalanced-scm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="check-the-tree-is-balanced">
<h3>check the tree is balanced<a class="headerlink" href="#check-the-tree-is-balanced" title="Permalink to this headline">¶</a></h3>
<p>balanced means any two leaf have the same length form root</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;mystruct.h&gt;</span>
<span class="kt">int</span> <span class="nf">maxDepth</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">node</span><span class="p">)</span> <span class="p">{</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
 <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">MAX</span><span class="p">(</span><span class="n">maxDepth</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">maxDepth</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">));</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">minDepth</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">node</span><span class="p">)</span> <span class="p">{</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
 <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">MIN</span><span class="p">(</span><span class="n">minDepth</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">minDepth</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">));</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">isBalanced</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">maxDepth</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="o">-</span> <span class="n">minDepth</span><span class="p">(</span><span class="n">root</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
 <span class="cp">#define i btree_init</span>
 <span class="cp">#define a btree_append</span>
 <span class="cp">#define b(x,y,z) a(i(x), i(y), i(z))</span>
 <span class="cp">#define E(n) btree_print(n, 0); printf(&quot;=&gt; %s\n&quot;, isBalanced(n) ? &quot;OK&quot; : &quot;NO&quot;);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">b</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)));</span>
 <span class="n">E</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">b</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">i</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="n">b</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">))));</span>
 <span class="n">E</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>1
 1
  2
  3
 1
  2
  <span class="nv">3</span>
<span class="o">=</span>&gt; OK
1
 1
  2
  3
 1
  2
  3
   4
   <span class="nv">5</span>
<span class="o">=</span>&gt; NO
<span class="nv">1</span>
<span class="o">=</span>&gt; OK
</pre></div>
</div>
</div>
</div>
<div class="section" id="lowest-common-ancestor-scm">
<h2><a class="toc-backref" href="#id5">lowest-common-ancestor.scm</a><a class="headerlink" href="#lowest-common-ancestor-scm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lowest-common-ancestor-order-o-n">
<h3>Lowest Common Ancestor (ORDER=O(n))<a class="headerlink" href="#lowest-common-ancestor-order-o-n" title="Permalink to this headline">¶</a></h3>
<p>pathをキャッシュする</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;mystruct.h&gt;</span>
<span class="cp">#include &lt;myutils.h&gt;</span>
<span class="n">btree</span> <span class="o">*</span><span class="nf">traverse</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">DUMMY</span><span class="p">,</span> <span class="n">btree</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="n">btree</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="n">btree</span><span class="o">*&gt;</span><span class="n">paths</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">paths</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">find</span><span class="p">(</span><span class="n">paths</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">paths</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">paths</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
      <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
    <span class="k">else</span>
      <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
 <span class="cp">#define i(a) btree *n ## a = btree_init(a);</span>
 <span class="cp">#define a btree_append</span>
 <span class="cp">#define E(a, b) printf(&quot;%d, %d =&gt; %d\n&quot;, a-&gt;data, b-&gt;data, (traverse(n1, a, b) == NULL) ? -1 : traverse(n1, a, b)-&gt;data);</span>
 <span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
 <span class="n">a</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">n3</span><span class="p">,</span><span class="n">n6</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">));</span>
 <span class="n">btree_print</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span> <span class="n">n6</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span> <span class="n">n6</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>1
 2
  4
  5
 3
  6
4, <span class="nv">5</span> <span class="o">=</span>&gt; 2
4, <span class="nv">6</span> <span class="o">=</span>&gt; 1
2, <span class="nv">6</span> <span class="o">=</span>&gt; 1
</pre></div>
</div>
</div>
<div class="section" id="lowest-common-ancestor-without-addtional-memory-ci-tree-6">
<h3>Lowest Common Ancestor Without Addtional Memory (CI tree.6)<a class="headerlink" href="#lowest-common-ancestor-without-addtional-memory-ci-tree-6" title="Permalink to this headline">¶</a></h3>
<p>rootから順にa,bを持つかどうか調べる</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;mystruct.h&gt;</span>
<span class="cp">#include &lt;myutils.h&gt;</span>
<span class="kt">int</span> <span class="nf">hasNode</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">tree</span><span class="p">,</span> <span class="n">btree</span> <span class="o">*</span><span class="n">target</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">tree</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">FALSE</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">tree</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">TRUE</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">hasNode</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span> <span class="o">||</span> <span class="n">hasNode</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">btree</span> <span class="o">*</span><span class="nf">traverse</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">tree</span><span class="p">,</span> <span class="n">btree</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="n">btree</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">tree</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">hasNode</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">hasNode</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">traverse</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">hasNode</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">hasNode</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">traverse</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">tree</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
 <span class="cp">#define i(a) btree *n ## a = btree_init(a);</span>
 <span class="cp">#define a btree_append</span>
 <span class="cp">#define E(a, b) printf(&quot;%d, %d =&gt; %d\n&quot;, a-&gt;data, b-&gt;data, (traverse(n1, a, b) == NULL) ? -1 : traverse(n1, a, b)-&gt;data);</span>
 <span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
 <span class="n">a</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">n3</span><span class="p">,</span><span class="n">n6</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">));</span>
 <span class="n">btree_print</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span> <span class="n">n6</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span> <span class="n">n6</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>1
 2
  4
  5
 3
  6
4, <span class="nv">5</span> <span class="o">=</span>&gt; 2
4, <span class="nv">6</span> <span class="o">=</span>&gt; 1
2, <span class="nv">6</span> <span class="o">=</span>&gt; 1
</pre></div>
</div>
</div>
</div>
<div class="section" id="sub-tree-scm">
<h2><a class="toc-backref" href="#id6">sub-tree.scm</a><a class="headerlink" href="#sub-tree-scm" title="Permalink to this headline">¶</a></h2>
<p>return true If a sub tree is a part of the parent tree</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;mystruct.h&gt;</span>
<span class="cp">#include &lt;myc.h&gt;</span>
<span class="kt">int</span> <span class="nf">matchTree</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="n">btree</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">TRUE</span><span class="p">;</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">==</span> <span class="n">b</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">matchTree</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">b</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
            <span class="n">matchTree</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">b</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">subTree</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">tree</span><span class="p">,</span> <span class="n">btree</span> <span class="o">*</span><span class="n">sub</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">sub</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">TRUE</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">tree</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">FALSE</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">matchTree</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">sub</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">TRUE</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">subTree</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">sub</span><span class="p">)</span> <span class="o">||</span> <span class="n">subTree</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">sub</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
 <span class="cp">#define i(a) btree *n ## a = btree_init(a);</span>
 <span class="cp">#define I(a) btree_init(a)</span>
 <span class="cp">#define a btree_append</span>
 <span class="cp">#define E(a, b) printf(&quot;%d, %d =&gt; %d\n&quot;, a-&gt;data, b-&gt;data, subTree(a, b));</span>
 <span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
 <span class="n">a</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">)),</span> <span class="n">a</span><span class="p">(</span><span class="n">I</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">));</span>
 <span class="n">btree_print</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span> <span class="n">I</span><span class="p">(</span><span class="mi">6</span><span class="p">));</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">I</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">I</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">6</span><span class="p">))));</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">I</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">6</span><span class="p">)));</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">I</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">I</span><span class="p">(</span><span class="mi">6</span><span class="p">)));</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">I</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">I</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">I</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">I</span><span class="p">(</span><span class="mi">6</span><span class="p">))),</span> <span class="nb">NULL</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>1
 2
  3
  4
   5
   6
 3
  6
4, <span class="nv">6</span> <span class="o">=</span>&gt; 1
1, <span class="nv">2</span> <span class="o">=</span>&gt; 1
1, <span class="nv">4</span> <span class="o">=</span>&gt; 1
1, <span class="nv">4</span> <span class="o">=</span>&gt; 0
1, <span class="nv">1</span> <span class="o">=</span>&gt; 0
</pre></div>
</div>
</div>
<div class="section" id="traverse-order-scm">
<h2><a class="toc-backref" href="#id7">traverse-order.scm</a><a class="headerlink" href="#traverse-order-scm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="in-order-traversalnode-ci-tree-5">
<h3>in-order traversalにおける次のnodeの求め方 (CI tree.5)<a class="headerlink" href="#in-order-traversalnode-ci-tree-5" title="Permalink to this headline">¶</a></h3>
<p>in-orderにおける次を求めたい</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">traverse</span><span class="p">(</span><span class="n">tree</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tree</span><span class="o">.</span><span class="n">left</span><span class="p">:</span>
        <span class="n">traverse</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">left</span><span class="p">)</span>
    <span class="c"># do something</span>
    <span class="k">if</span> <span class="n">tree</span><span class="o">.</span><span class="n">right</span><span class="p">:</span>
        <span class="n">traverse</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>
</pre></div>
</div>
<p>コードから読み取れること (#doした後、次どこか考える)
すでに#doしているので、rightがあれば、
次のnodeは traverse(tree.right) ではじめに# doするnodeとなる
(#do以外は同じコードを流用できるのがミソ、
ただし一つ目だけわかればよいので、if tree.rightなどは不要)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">traverse</span><span class="p">(</span><span class="n">tree</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tree</span><span class="o">.</span><span class="n">left</span><span class="p">:</span>
        <span class="n">traverse</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">left</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tree</span>  <span class="c"># do return!</span>
</pre></div>
</div>
<p>rightがない場合は、親をたどるが、以下のいずれかから関数が返る
- traverse(tree.left)
- traverse(tree.right)
leftから戻ってきた場合は#doをするので、親が次のnodeとなる
rightから戻った場合、再度親をたどる(再帰)</p>
<p>rightから常に戻ってくる場合は、次のnodeがないことになる</p>
<p>in-orderの場合, left mid rightの順
mid =&gt; rightと評価されているので、親をたどるときに、
right側であれば、それはすでにmidで評価されているものになる
left側からの場合は、すぐにmidを評価してよい(l =&gt; m =&gt; rの順だからね)</p>
<p>コードから判断は、なんかよくわかんないけど
図にすれば、in-orderのpreバージョンも条件逆にするだけってのがよくわかる
とにかく、左子供から帰ってきたら、次親の真ん中だね</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;mystruct.h&gt;</span>
<span class="n">btree</span> <span class="o">*</span><span class="nf">traverse</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">tree</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">tree</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">btree</span> <span class="o">*</span><span class="n">n</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">n</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
      <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">btree</span> <span class="o">*</span><span class="n">n</span> <span class="o">=</span> <span class="n">tree</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">n</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">&amp;&amp;</span> <span class="n">n</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="n">n</span><span class="p">)</span>
      <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
 <span class="cp">#define i(a) btree *n ## a = btree_init(a);</span>
 <span class="cp">#define a btree_append</span>
 <span class="cp">#define E(n) printf(&quot;%d =&gt; %d\n&quot;, n-&gt;data, (traverse(n) == NULL) ? -1 : traverse(n)-&gt;data);</span>
 <span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
 <span class="n">a</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">n3</span><span class="p">,</span><span class="n">n6</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">));</span>
 <span class="n">btree_print</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n4</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n2</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n5</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n1</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n6</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n3</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>1
 2
  4
  5
 3
  6
<span class="nv">4</span> <span class="o">=</span>&gt; 2
<span class="nv">2</span> <span class="o">=</span>&gt; 5
<span class="nv">5</span> <span class="o">=</span>&gt; 1
<span class="nv">1</span> <span class="o">=</span>&gt; 6
<span class="nv">6</span> <span class="o">=</span>&gt; 3
<span class="nv">3</span> <span class="o">=</span>&gt; -1
</pre></div>
</div>
</div>
<div class="section" id="in-order-traversalnode">
<h3>in-order traversalにおける前のnodeの求め方<a class="headerlink" href="#in-order-traversalnode" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;mystruct.h&gt;</span>
<span class="n">btree</span> <span class="o">*</span><span class="nf">traverse</span><span class="p">(</span><span class="n">btree</span> <span class="o">*</span><span class="n">tree</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">btree</span> <span class="o">*</span><span class="n">child</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">child</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
      <span class="n">child</span> <span class="o">=</span> <span class="n">child</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">child</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">btree</span> <span class="o">*</span><span class="n">n</span> <span class="o">=</span> <span class="n">tree</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">n</span><span class="o">-&gt;</span><span class="n">parent</span> <span class="o">&amp;&amp;</span> <span class="n">n</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="n">n</span><span class="p">)</span>
     <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
 <span class="cp">#define i(a) btree *n ## a = btree_init(a);</span>
 <span class="cp">#define a btree_append</span>
 <span class="cp">#define E(n) printf(&quot;%d =&gt; %d\n&quot;, n-&gt;data, (traverse(n) == NULL) ? -1 : traverse(n)-&gt;data);</span>
 <span class="n">i</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="n">i</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
 <span class="n">a</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">n3</span><span class="p">,</span><span class="n">n6</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">));</span>
 <span class="n">btree_print</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
 <span class="n">E</span><span class="p">(</span><span class="n">n3</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n6</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n1</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n5</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n2</span><span class="p">);</span> <span class="n">E</span><span class="p">(</span><span class="n">n4</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>1
 2
  4
  5
 3
  6
<span class="nv">3</span> <span class="o">=</span>&gt; 6
<span class="nv">6</span> <span class="o">=</span>&gt; 1
<span class="nv">1</span> <span class="o">=</span>&gt; 5
<span class="nv">5</span> <span class="o">=</span>&gt; 2
<span class="nv">2</span> <span class="o">=</span>&gt; 4
<span class="nv">4</span> <span class="o">=</span>&gt; -1
</pre></div>
</div>
</div>
</div>
<div class="section" id="union-find-scm">
<h2><a class="toc-backref" href="#id8">union-find.scm</a><a class="headerlink" href="#union-find-scm" title="Permalink to this headline">¶</a></h2>
<p>素集合をまとめる手法と要素がどの集合にあるか判定する手法に対して効率の良いデータ構造
ack関数の逆関数の計算量らしい?</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;myutils.h&gt;</span>
<span class="k">class</span> <span class="nc">UnionFind</span> <span class="p">{</span>
 <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">data</span><span class="p">;</span>
 <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">rank</span><span class="p">;</span>  <span class="c1">// hight of tree (プログラムによっては要素数?)</span>
<span class="k">public</span><span class="o">:</span>
 <span class="n">UnionFind</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">data</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="n">rank</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
 <span class="p">}</span>
 <span class="kt">int</span> <span class="n">find</span><span class="p">(</span><span class="kt">int</span> <span class="n">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">d</span> <span class="o">!=</span> <span class="n">data</span><span class="p">[</span><span class="n">d</span><span class="p">])</span>
   <span class="n">data</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">d</span><span class="p">]);</span>
  <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="n">d</span><span class="p">];</span>  <span class="c1">// 親ノードを返す(プログラムによっては、-1を親ノードと識別することもあるみたい)</span>
 <span class="p">}</span>
 <span class="kt">bool</span> <span class="n">isSame</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">find</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">find</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
 <span class="p">}</span>
 <span class="kt">void</span> <span class="n">unionSet</span><span class="p">(</span><span class="kt">int</span> <span class="n">a_</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b_</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">a_</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">b_</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">rank</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">rank</span><span class="p">[</span><span class="n">b</span><span class="p">])</span>
   <span class="n">data</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">rank</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">rank</span><span class="p">[</span><span class="n">b</span><span class="p">])</span>
   <span class="n">data</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
  <span class="k">else</span> <span class="p">{</span>
   <span class="n">data</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">rank</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
 <span class="p">}</span>
 <span class="k">friend</span> <span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="n">UnionFind</span><span class="o">&amp;</span> <span class="n">u</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">u</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; =&gt; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">u</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; =&gt; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">os</span><span class="p">;</span>
 <span class="p">}</span>
<span class="p">};</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
 <span class="n">UnionFind</span> <span class="n">u</span> <span class="o">=</span> <span class="n">UnionFind</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
 <span class="n">P</span><span class="p">(</span><span class="n">u</span><span class="p">);</span>
 <span class="n">u</span><span class="p">.</span><span class="n">unionSet</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
 <span class="n">u</span><span class="p">.</span><span class="n">unionSet</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
 <span class="n">u</span><span class="p">.</span><span class="n">unionSet</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
 <span class="n">u</span><span class="p">.</span><span class="n">unionSet</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
 <span class="n">P</span><span class="p">(</span><span class="n">u</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">u</span> <span class="o">=</span> <span class="nv">0</span> <span class="o">=</span>&gt; <span class="nv">0</span> <span class="o">=</span>&gt;
<span class="nv">1</span> <span class="o">=</span>&gt; <span class="nv">1</span> <span class="o">=</span>&gt;
<span class="nv">2</span> <span class="o">=</span>&gt; <span class="nv">2</span> <span class="o">=</span>&gt;
<span class="nv">3</span> <span class="o">=</span>&gt; <span class="nv">3</span> <span class="o">=</span>&gt;
<span class="nv">4</span> <span class="o">=</span>&gt; <span class="nv">4</span> <span class="o">=</span>&gt;

<span class="nv">u</span> <span class="o">=</span> <span class="nv">0</span> <span class="o">=</span>&gt; <span class="nv">1</span> <span class="o">=</span>&gt;
<span class="nv">1</span> <span class="o">=</span>&gt; <span class="nv">1</span> <span class="o">=</span>&gt;
<span class="nv">2</span> <span class="o">=</span>&gt; <span class="nv">1</span> <span class="o">=</span>&gt;
<span class="nv">3</span> <span class="o">=</span>&gt; <span class="nv">1</span> <span class="o">=</span>&gt;
<span class="nv">4</span> <span class="o">=</span>&gt; <span class="nv">1</span> <span class="o">=</span>&gt;
</pre></div>
</div>
<p><a class="reference external" href="http://judge.u-aizu.ac.jp/onlinejudge/commentary.jsp?id=DSL_1_A">http://judge.u-aizu.ac.jp/onlinejudge/commentary.jsp?id=DSL_1_A</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">

  
  

  <div class="container">
    
    <p>
        &copy; Copyright 2015, Hiroyuki Ishii.<br/>
    </p>
  </div>
</footer>

  </body>
</html>